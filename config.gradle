gradle.properties
import java.text.SimpleDateFormat

ext {
    APP_NAME = "Base"
    APPLICATION_ID = ""

    ENDPOINT = ""

    SUPPORT_LIBRARY_VERSION = "25.1.0"
}

ext {
    versionMajor = 1
    versionMinor = 0
    versionPatch = 11
    versionBuild = 0

    computeVersionCode = this.&computeVersionCode
    computeVersionName = this.&computeVersionName

    generateName = this.&generateName
}


def computeVersionCode() {
    return versionMajor * 1000000 + versionMinor * 10000 + versionPatch * 100 + versionBuild
}

def computeVersionName() {
    return "${versionMajor}.${versionMinor}.${versionPatch}"
}

def generateName(appVariants) {
    appVariants.all { variant ->
        variant.outputs.each { output ->
//            def newName = output.outputFile.name
//            if (newName.toString().contains("-release")){}
            def newName = APP_NAME + "_v.${variant.versionName}_" + getDate() + "_" + variant.productFlavors[0].name + ".apk"
            output.outputFile = new File(output.outputFile.parent, newName)
        }
    }
}

def getDate() {
    def df = new SimpleDateFormat("yyyy-MM-dd") //you can change it
    df.setTimeZone(TimeZone.getTimeZone("UTC"))
    return df.format(new Date())
}
